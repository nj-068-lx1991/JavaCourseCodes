## 模块七 RPC 和微服务

	微服务是一种分布式的方式，通过微服务可以将业务拆分，使业务职责单一化，业务解耦。微服务通常都
	是集群部署，服务之间的通信需要通过RPC完成。集群需要通过服务治理去管理，服务治理主要管理：接
	口方法和服务之间的映射关系、负载均衡、健康检测、服务续约、服务发现、容灾容错等。

> 一、RPC

> 动态代理

	RPC 会自动给接口生成一个代理类，当我们在项目中注入接口的时候，运行过程中实际绑定的是这个接
	口生成的代理类。这样在接口方法被调用的时候，它实际上是被生成代理类拦截到了，这样我们就可以在
	生成的代理类里面，加入远程调用逻辑。常用的动态代理技术有:JDK动态代理、Javassist、Byte 
	Buddy、cglib等

> io多路复用：

> 零拷贝

	零拷贝最主要的两种方式有mmap和sendfile，其中sendfile是性能最好最常用的方式。传统的拷贝是需要
	经历这样的流程：用户进程希望在网络中发送数据时。
	1、首先需要去磁盘读出这些数据这就需要发送read请求，需要从用户态切换到内核态才能完成这个命令
	2、然后内核态中利用DMA技术将磁盘的数据拷贝到内核态缓存中，然后再将内核态的缓存的数据拷贝到
	用户态缓存
	3、紧接着又需要将这些数据从用户态缓存拷贝到内核态缓存中，这时用户态又切换到了内核态
	4、然后又得将内核态缓存的这些数据通过DMA技术拷贝到网卡缓存中，然后发送，结束后切回到用户
	态。

> 序列化:

	RPC的数据传输是依靠TCP完成，TCP传输的数据是二进制数据，这时就需要将方法中传输的对象进行序
	列化和反序列化，序列化主要考虑的几个点：安全性、兼容性、性能、序列化后体积大小。
	目前比较知名的有Json、Hessian、Protobuf、Kryo。像dubbo的默认序列化方式是Hessian，
	springcloud的feign是Json,gRPC是Protobuf。

> SPI

	RPC的拓展插件功能。

> 二、服务治理

	服务治理主要有：服务发现、服务续约、健康检测、负载均衡、容灾容错等。主要是通过将服务注册到注
	册中心实现这些功能。比较出名的注册中心有：Eureka、nacos、zookeeper等

> 服务发现

> 健康检测

> 负载均衡

> 熔断限流降级

> 分布式链路跟踪

> 路由网关和配置中心